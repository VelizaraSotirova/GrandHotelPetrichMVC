@using GrandHotelPetrichMVC.ViewModels.Receptionists.Booking
@* @using GrandHotelPetrichMVC.ViewModels.Receptionists.Booking
@model ReceptionistBookingCreateViewModel

@{
    ViewData["Title"] = "Book Room";
}

<section class="py-8">
    <div class="container mx-auto max-w-md">
        <h2 class="text-2xl font-semibold mb-6">Create Booking</h2>

        <form method="post">
            <input type="hidden" asp-for="RoomId" />
            <input type="hidden" asp-for="CheckInDate" />
            <input type="hidden" asp-for="CheckOutDate" />
            <input type="hidden" asp-for="NumberOfGuests" />
            <input type="hidden" asp-for="TotalAmount" />

            <div class="mb-4">
                <label asp-for="Email" class="block font-medium">Guest Email</label>
                <input asp-for="Email" class="form-input w-full" />
                <span asp-validation-for="Email" class="text-red-600 text-sm"></span>
            </div>

            <div class="mb-4">
                <label asp-for="PaymentMethodId" class="block font-medium">Payment Method</label>
                <select asp-for="PaymentMethodId" asp-items="@(new SelectList(Model.PaymentMethods, "Id", "Name"))" class="form-select w-full"></select>
                <span asp-validation-for="PaymentMethodId" class="text-red-600 text-sm"></span>
            </div>

            <div class="mb-6">
                <label class="block font-medium">Total Price</label>
                <p class="text-lg font-semibold text-amber-700">@Model.TotalAmount.ToString("C")</p>
            </div>

            <button type="submit" class="w-full bg-amber-600 text-white text-lg font-semibold px-6 py-3 rounded-md hover:bg-amber-700 transition">
                Confirm Booking
            </button>
        </form>
    </div>
</section>

<partial name="_ValidationScriptsPartial" /> *@

@model ReceptionistBookingCreateViewModel

@{
    ViewData["Title"] = "Create Booking";
}

<section class="max-w-2xl mx-auto py-8">
    <h2 class="text-2xl font-bold mb-6">New Guest Booking</h2>

    <form asp-action="Book" method="post">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
                <label asp-for="FirstName" class="block">First Name</label>
                <input asp-for="FirstName" class="form-input w-full" />
                <span asp-validation-for="FirstName" class="text-red-600 text-sm"></span>
            </div>

            <div>
                <label asp-for="LastName" class="block">Last Name</label>
                <input asp-for="LastName" class="form-input w-full" />
                <span asp-validation-for="LastName" class="text-red-600 text-sm"></span>
            </div>

            <div>
                <label asp-for="Email" class="block">Email</label>
                <input asp-for="Email" class="form-input w-full" />
                <span asp-validation-for="Email" class="text-red-600 text-sm"></span>
            </div>

            <div>
                <label asp-for="PhoneNumber" class="block">Phone</label>
                <input asp-for="PhoneNumber" class="form-input w-full" />
                <span asp-validation-for="PhoneNumber" class="text-red-600 text-sm"></span>
            </div>

            <div>
                <label asp-for="CheckInDate" class="block">Check-In</label>
                <input asp-for="CheckInDate" type="date" class="form-input w-full" id="CheckInDate" min="@DateTime.Today.ToString("yyyy-MM-dd")" />
            </div>

            <div>
                <label asp-for="CheckOutDate" class="block">Check-Out</label>
                <input asp-for="CheckOutDate" type="date" class="form-input w-full" id="CheckOutDate" min="@DateTime.Today.AddDays(1).ToString("yyyy-MM-dd")" />
            </div>

            <div>
                <label asp-for="NumberOfGuests" class="block">Guests</label>
                <input asp-for="NumberOfGuests" class="form-input w-full" type="number" min="1" max="10" />
            </div>

            <div>
                <label asp-for="RoomId" class="block">Room ID</label>
                <input asp-for="RoomId" class="form-input w-full" />
            </div>

            <div>
                <label asp-for="PaymentMethodId" class="block">Payment</label>
                <select asp-for="PaymentMethodId" asp-items="@(new SelectList(Model.PaymentMethods, "Id", "Name"))" class="form-select w-full"></select>
            </div>
        </div>

        <div class="mt-6">
            <button type="submit" class="bg-amber-600 text-white px-6 py-2 rounded hover:bg-amber-700">
                Confirm Booking
            </button>
        </div>
    </form>
</section>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />

    <script>
        $(function () {
            $('form').submit(function (e) {
                const checkIn = new Date($('#CheckInDate').val());
                const checkOut = new Date($('#CheckOutDate').val());

                if (checkIn >= checkOut) {
                    e.preventDefault();
                    alert("Check-in date must be before check-out date.");
                    return false;
                }

                if (checkIn < new Date().setHours(0, 0, 0, 0)) {
                    e.preventDefault();
                    alert("Check-in date cannot be in the past.");
                    return false;
                }

                return true;
            });
        });
    </script>
}

