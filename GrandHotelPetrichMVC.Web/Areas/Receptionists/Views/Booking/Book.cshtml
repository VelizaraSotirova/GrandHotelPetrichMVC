@using GrandHotelPetrichMVC.ViewModels.Receptionists.Booking
@model ReceptionistBookingCreateViewModel

@{
    ViewData["Title"] = "Create Booking";
}

<section class="max-w-2xl mx-auto py-8">
    <h2 class="text-2xl font-bold mb-6">New Guest Booking</h2>

    <form asp-action="Book" method="post">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
                <label asp-for="FirstName" class="block">First Name</label>
                <input asp-for="FirstName" class="form-input w-full" />
                <span asp-validation-for="FirstName" class="text-red-600 text-sm"></span>
            </div>

            <div>
                <label asp-for="LastName" class="block">Last Name</label>
                <input asp-for="LastName" class="form-input w-full" />
                <span asp-validation-for="LastName" class="text-red-600 text-sm"></span>
            </div>

            <div>
                <label asp-for="Email" class="block">Email</label>
                <input asp-for="Email" class="form-input w-full" />
                <span asp-validation-for="Email" class="text-red-600 text-sm"></span>
            </div>

            <div>
                <label asp-for="PhoneNumber" class="block">Phone</label>
                <input asp-for="PhoneNumber" class="form-input w-full" />
                <span asp-validation-for="PhoneNumber" class="text-red-600 text-sm"></span>
            </div>

            <div>
                <label asp-for="CheckInDate" class="block">Check-In</label>
                <input type="text"
                       class="form-input w-full bg-gray-100 cursor-not-allowed"
                       value="@Model.CheckInDate.ToString("yyyy-MM-dd")"
                       readonly />
                <input type="hidden" asp-for="CheckInDate" />
            </div>

            <div>
                <label asp-for="CheckOutDate" class="block">Check-Out</label>
                <input type="text"
                       class="form-input w-full bg-gray-100 cursor-not-allowed"
                       value="@Model.CheckOutDate.ToString("yyyy-MM-dd")"
                       readonly />
                <input type="hidden" asp-for="CheckOutDate" />
            </div>

            <div>
                <label asp-for="NumberOfGuests" class="block">Guests</label>
                <input type="text"
                       class="form-input w-full bg-gray-100 cursor-not-allowed"
                       value="@Model.NumberOfGuests"
                       readonly />
                <input type="hidden" asp-for="NumberOfGuests" />
            </div>


            <div>
                <label asp-for="RoomId" class="block">Room ID</label>
                <input type="text"
                       class="form-input w-full bg-gray-100 cursor-not-allowed"
                       value="@Model.RoomId"
                       readonly />
                <input type="hidden" asp-for="RoomId" />
            </div>


            <div>
                <label asp-for="PaymentMethodId" class="block">Payment</label>
                <select asp-for="PaymentMethodId" asp-items="@(new SelectList(Model.PaymentMethods, "Id", "Name"))" class="form-select w-full"></select>
            </div>
        </div>

        <div class="mt-6">
            <button type="submit" class="bg-amber-600 text-white px-6 py-2 rounded hover:bg-amber-700">
                Confirm Booking
            </button>
        </div>
    </form>
</section>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />

    @* <script>
        $(function () {
            $('form').submit(function (e) {
                const checkIn = new Date($('#CheckInDate').val());
                const checkOut = new Date($('#CheckOutDate').val());

                if (checkIn >= checkOut) {
                    e.preventDefault();
                    alert("Check-in date must be before check-out date.");
                    return false;
                }

                if (checkIn < new Date().setHours(0, 0, 0, 0)) {
                    e.preventDefault();
                    alert("Check-in date cannot be in the past.");
                    return false;
                }

                return true;
            });
        });
    </script> *@
}

